import{r as y,R as c,a9 as b,aH as T,t as g,v as r,J as m,O as N,ck as V,D as S,cl as D,ay as E,z as f,bY as O,bZ as K,K as h,P as v,aP as P,aO as C}from"./vue-vendor-DFucVWOH.js";import{j as x}from"./index-CCDP2_BA.js";import{f as z}from"./product-Tj4w8GgV.js";const B={class:"grid-demo"},R=y({name:"VxeTableDemo",__name:"vxe-table-demo",setup(w){const n=c(!1),t=b({pageNo:1,pageSize:50,total:51}),i=c(null),a=b({border:!0,loading:!1,showOverflow:!0,showHeaderOverflow:!0,showFooterOverflow:!0,height:400,columnConfig:{resizable:!0},scrollY:{enabled:!0,gt:0}}),o=[{field:"product_id",title:"产品id",width:150},{field:"product_name",title:"产品名称",width:150},{field:"price",title:"价格",width:150},{field:"category",title:"分类",width:150},{field:"stock",title:"库存",width:150},{field:"description",title:"描述",width:300}],s=c([]),u=async()=>{console.log("2222222222222"),n.value=!0,await z({search:"",pageNo:t.pageNo,pageSize:t.pageSize}).then(l=>{var d;console.log("res",l),s.value=[...s.value,...((d=l==null?void 0:l.data)==null?void 0:d.products)||[]],console.log("tableData.value",s.value)}).finally(()=>{n.value=!1})},p={scroll:l=>{const{scrollTop:d,bodyHeight:e,scrollHeight:_}=l;d+e>=_-1&&(console.log("实际已滚动到底部"),t.pageNo+=1,u())}};return T(()=>{u()}),(l,d)=>(r(),g("div",B,[m(S(D),N({ref_key:"gridRef",ref:i},a,{columns:o,data:s.value},V(p)),null,16,["data"])]))}}),M=x(R,[["__scopeId","data-v-dbd84d35"]]),$={style:{width:"100%"}},F={key:0,class:"loading-container"},G={key:1,class:"no-more-data"},I=y({__name:"table-optimization",setup(w){const n=c(null),t=c(!1),i=c(!0),a=c([]),o=b({pageNo:0,pageSize:50,total:51}),s=[{key:"product_id",dataKey:"product_id",title:"产品id",width:150},{key:"product_name",dataKey:"product_name",title:"产品名称",width:150},{key:"price",dataKey:"price",title:"价格",width:150},{key:"category",dataKey:"category",title:"分类",width:150},{key:"stock",dataKey:"stock",title:"库存",width:150},{key:"description",dataKey:"description",title:"描述",width:150}],u=async()=>{console.log("2222222222222"),t.value=!0,await z({search:"",pageNo:o.pageNo,pageSize:o.pageSize}).then(e=>{var _;console.log("res",e),a.value=[...a.value,...((_=e==null?void 0:e.data)==null?void 0:_.products)||[]]}).finally(()=>{t.value=!1})},p=async()=>{o.pageNo+=1,u()},d=E(()=>{const e=document.querySelector(".el-table-v2__body div");t.value||!i.value||(console.log("element.scrollHeight,element.scrollTop,element.clientHeight,阈值:",e.scrollHeight,e.scrollTop,e.clientHeight,0),e.scrollHeight<=e.scrollTop+e.clientHeight+0&&o.total>o.pageNo*o.pageSize&&p())},300);return T(()=>{}),(e,_)=>{const k=O,H=K;return r(),g("div",$,[m(k,{ref_key:"tableRef",ref:n,columns:s,data:a.value,width:1e3,height:400,fixed:"",onScroll:S(d)},null,8,["data","onScroll"]),t.value?(r(),g("div",F,[m(H,{animated:"",row:"1","column-width":[200]})])):f("",!0),!t.value&&i.value===!1?(r(),g("div",G,"没有更多数据了")):f("",!0)])}}}),Y=y({name:"personal-content_table-optimization",__name:"index",setup(w){const n=c("first"),t=(i,a)=>{console.log(i,a)};return(i,a)=>{const o=I,s=P,u=M,p=C;return r(),h(p,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),class:"demo-tabs",onTabClick:t},{default:v(()=>[m(s,{label:"elementPlus Virtualized Table实现方式",name:"first"},{default:v(()=>[n.value==="first"?(r(),h(o,{key:0})):f("",!0)]),_:1}),m(s,{label:"VXE-Table实现方式",name:"second"},{default:v(()=>[n.value==="second"?(r(),h(u,{key:0})):f("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),L=x(Y,[["__scopeId","data-v-cf0c1ead"]]);export{L as default};
