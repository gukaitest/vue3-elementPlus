import{aQ as E,d as z,r as t,D as b,aH as M,a as R,aR as V,c as y,o as C,w as u,f as d,a7 as H,a8 as B,e as D,aS as F,h as T,N as k,aj as q}from"./index-V8uww8ns.js";function I(r){return E({url:"/products",method:"get",params:r})}const L={class:"flex-col-top size-full min-h-420px gap-24px overflow-hidden"},j=z({name:"personal-content_select-optimization",__name:"index",setup(r){const i=t(""),a=t(null),f=b(),o=M({pageNo:1,pageSize:50,total:51}),_=R(()=>f.isMobile?0:16),m=t([]),l=t([]),h=t(!1),g=async()=>{await I({search:i.value,pageNo:o.pageNo,pageSize:o.pageSize}).then(e=>{var n,c;console.log("res",e);const s=((n=e==null?void 0:e.data)==null?void 0:n.products.map(p=>({value:p.product_id,label:p.product_name})))??[];o.total=((c=e==null?void 0:e.data)==null?void 0:c.total)??0,l.value.push(...s)}).finally(()=>{})},x=()=>{if(a.value){console.log("loadMore判断依据",a.value.scrollHeight,a.value.scrollTop,a.value.clientHeight,o.total,o.pageNo,o.pageSize);const e=a.value.scrollHeight-a.value.scrollTop<=a.value.clientHeight&&o.total>o.pageNo*o.pageSize;console.log("loadMore",e),e&&(o.pageNo+=1,g())}},v=()=>{a.value=document.querySelector(".selectRef .el-select-dropdown__list"),console.log("element.value",a.value),a.value&&a.value.addEventListener("scroll",x)},S=V(async e=>{i.value=e,o.pageNo=1,o.pageSize=50,l.value.splice(0,l.value.length),g(),setTimeout(()=>{v()},2e3)},500);return(e,s)=>{const n=F,c=B,p=H,N=k;return C(),y(N,{class:"card-wrapper"},{default:u(()=>[d(p,{gutter:_.value,class:"px-8px"},{default:u(()=>[d(c,{md:18,sm:24},{default:u(()=>[D("div",L,[d(n,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=w=>m.value=w),"popper-class":"selectRef",class:"m-6","popper-append-to-body":!1,multiple:"",filterable:"",remote:"","collapse-tags":"","max-collapse-tags":3,"remote-method":T(S),clearable:"",options:l.value,loading:h.value,placeholder:"请输入关键字再选择",style:{width:"240px"},onFocus:v},null,8,["modelValue","remote-method","options","loading"])])]),_:1})]),_:1},8,["gutter"])]),_:1})}}}),O=q(j,[["__scopeId","data-v-5ff13349"]]);export{O as default};
