import{j as y}from"./index-C1YnPq5G.js";import{f as w}from"./product-qbMYeVa3.js";import{r as C,s as O,a5 as z,R as s,a9 as A,aH as D,t as L,v as x,J as f,P as _,aV as $,D as V,bU as F,aU as I,K as k,aP as R,z as j,aO as G}from"./vue-vendor-DLKW-W3j.js";const H={class:"select_tree_box"},J=C({__name:"select-tree",props:{selectValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"请选择"},showRoot:{type:Boolean,default:!1},isExcludeSupplier:{type:Boolean,default:!1}},emits:["update:selectValue"],setup(b,{emit:c}){const p={value:"value",label:"label",children:"children"},u=b,i=c,t=O({get(){return console.log("父传子props.selectValue",u.selectValue),u.selectValue||[]},set(e){console.log("发给父组件的newValue",e),i("update:selectValue",e)}});z(()=>u.selectValue,e=>{t.value=e,console.log("接收父组件的newValue",e)},{immediate:!0});const r=s([]),X=s([]),v=s([]),n=A({currentNodeKey:"",currentNodeLabel:""}),g=s(null),o=s(null);D(()=>{w({product_name:"",pageNo:1,pageSize:3e3}).then(e=>{var a;console.log("XXXXXXXXXXXXXX res",e),e.data&&(r.value=e.data.products.map(l=>({value:l.product_id,label:l.product_name,level:1,children:[{value:`${l.product_id}_001`,label:`${l.product_name}_001children`,level:2}]})),console.log("XXXXXXXXXXXXX listData.value",r.value),(a=o.value)==null||a.setExpandedKeys(["1"]))})});const E=e=>{var a;console.log("XXXXXXXXXXXXX visible",e),e&&((a=o.value)==null||a.setExpandedKeys([]))},N=()=>{var e;t.value=[],(e=o.value)==null||e.setCheckedKeys([])},S=e=>{var a,l;console.log("11111111111111 query",e),v.value=[],(a=o.value)==null||a.filter(e),console.log("2222222222222",(l=o.value)==null?void 0:l.filter(e),o.value)},T=(e,a)=>{console.log("11111XXXXXXXXXXXX data,info:",e,e.children,a),t.value=a.checkedNodes.filter(l=>l.level===2).map(l=>(console.log("item",l,l.value),{label:l.label,value:l.value})),console.log("xxxxxxxxxxxxxxx  dataValue.value",t.value)},K=e=>{console.log("XXXXXXXXXXXX data,node:",e)},B=e=>{var a,l;if(Array.isArray(e))for(let d=0;d<e.length;d+=1){const m=(a=v.value)==null?void 0:a.find(h=>h.value===e[d]);m&&X.value.findIndex(U=>U.value===m.value)>=0&&X.value.push(m)}(l=g.value)==null||l.blur()},P=(e,a)=>{if(e){const l=a.label.includes(e);return console.log("3333333333",l),l}return!0};return(e,a)=>{const l=$;return x(),L("div",H,[f(V(I),{ref_key:"treeSelect",ref:g,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=d=>t.value=d),"value-key":"value",clearable:"",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择","filter-method":S,onClear:N,onChange:B,onVisibleChange:E},{default:_(()=>[f(l,{value:n.currentNodeKey,label:n.currentNodeLabel},{default:_(()=>[f(V(F),{id:"tree_v2",ref_key:"treeV2",ref:o,data:r.value,props:p,"show-checkbox":"","filter-method":P,"default-expand-all":!1,"expanded-keys":[],"auto-expand-parent":!1,onNodeClick:K,onCheck:T},null,8,["data"])]),_:1},8,["value","label"])]),_:1},8,["modelValue"])])}}}),M=y(J,[["__scopeId","data-v-ad7ed997"]]),Q=C({name:"personal-content_el-select-tree-optimization",__name:"index",setup(b){const c=s("first"),p=s([]),u=(i,t)=>{console.log(i,t)};return(i,t)=>{const r=M,X=R,v=G;return x(),k(v,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=n=>c.value=n),class:"demo-tabs",onTabClick:u},{default:_(()=>[f(X,{label:"虚拟SelectTree优化",name:"first"},{default:_(()=>[c.value==="first"?(x(),k(r,{key:0,"select-value":p.value,"onUpdate:selectValue":t[0]||(t[0]=n=>p.value=n)},null,8,["select-value"])):j("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),q=y(Q,[["__scopeId","data-v-4def0549"]]);export{q as default};
