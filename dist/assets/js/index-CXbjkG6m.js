import{_ as _e}from"./table-header-operation.vue_vue_type_script_setup_true_lang-DRYRQ-Bf.js";import{e as oe,b as be}from"./business-DqWjaPW-.js";import{$ as a,i as ee,t as ge,j as ve}from"./index-DqhHIM60.js";import{b as he,c as ye,d as Ee}from"./system-manage-YgZl0hX0.js";import{u as Ce,a as ke}from"./table-CCNvt2wa.js";import{r as K,av as $,aw as L,s as O,ad as M,a5 as ae,K as R,v as b,az as te,P as o,y as z,J as l,ao as D,D as e,aU as ne,t as G,F as W,al as q,aV as se,bO as ue,bf as H,E as P,an as B,R as de,z as re,i as ce,be as ie,aA as me,br as we,bs as Ve,aE as F,aZ as xe,bt as Se,bu as De,bv as Re,bw as Ne,g as pe,A as Te,f as Be,bz as Ue,O as le,bA as Ae,bB as Ie,bj as Me,by as ze,bC as Oe}from"./vue-vendor-DLKW-W3j.js";import{u as Pe,a as je}from"./form-CBnkhOrm.js";import{_ as Fe,a as $e}from"./round-refresh-B3482ack.js";const Ge={class:"flex-y-center gap-16px pb-12px"},Ke=K({name:"MenuAuthModal",__name:"menu-auth-modal",props:$({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(g){const S=g,r=L(g,"visible");function w(){r.value=!1}const c=O(()=>a("common.edit")+a("page.manage.role.menuAuth")),V=M("");async function N(){console.log(S.roleId),V.value="home"}const m=M([]);async function i(){const{error:u,data:n}=await he();u||(m.value=n)}const x=O(()=>m.value.map(n=>({label:n,value:n}))),E=M([]);async function C(){const{error:u,data:n}=await ye();u||(E.value=n)}const d=M([]);async function f(){console.log(S.roleId),d.value=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}function p(u){const n=d.value.indexOf(u);n===-1?d.value.push(u):d.value.splice(n,1)}function k(){var u,n;console.log(d.value,S.roleId),(n=(u=window.$message)==null?void 0:u.success)==null||n.call(u,a("common.modifySuccess")),w()}function U(){N(),i(),C(),f()}return ae(r,u=>{u&&U()}),(u,n)=>{const I=se,A=ne,_=ue,s=P,t=H,T=te;return b(),R(T,{modelValue:r.value,"onUpdate:modelValue":n[2]||(n[2]=v=>r.value=v),title:c.value,preset:"card",class:"w-480px"},{footer:o(()=>[l(t,{class:"w-full justify-end"},{default:o(()=>[l(s,{size:"small",class:"mt-16px",onClick:w},{default:o(()=>[B(D(e(a)("common.cancel")),1)]),_:1}),l(s,{type:"primary",size:"small",class:"mt-16px",onClick:k},{default:o(()=>[B(D(e(a)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[z("div",Ge,[z("div",null,D(e(a)("page.manage.menu.home")),1),l(A,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=v=>V.value=v),options:x.value,size:"small",class:"w-160px"},{default:o(()=>[(b(!0),G(W,null,q(x.value,({value:v,label:j})=>(b(),R(I,{key:v,value:v,label:j},null,8,["value","label"]))),128))]),_:1},8,["modelValue","options"])]),l(_,{"checked-keys":d.value,"onUpdate:checkedKeys":n[1]||(n[1]=v=>d.value=v),data:E.value,"node-key":"id","show-checkbox":"",class:"h-280px","default-checked-keys":d.value,onCheckChange:p},null,8,["checked-keys","data","default-checked-keys"])]),_:1},8,["modelValue","title"])}}}),Le=K({name:"ButtonAuthModal",__name:"button-auth-modal",props:$({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(g){const S=g,r=L(g,"visible");function w(){r.value=!1}const c=O(()=>a("common.edit")+a("page.manage.role.buttonAuth")),V=M([]);async function N(){V.value=[{id:1,label:"button1",code:"code1"},{id:2,label:"button2",code:"code2"},{id:3,label:"button3",code:"code3"},{id:4,label:"button4",code:"code4"},{id:5,label:"button5",code:"code5"},{id:6,label:"button6",code:"code6"},{id:7,label:"button7",code:"code7"},{id:8,label:"button8",code:"code8"},{id:9,label:"button9",code:"code9"},{id:10,label:"button10",code:"code10"}]}const m=M([]);async function i(){console.log(S.roleId),m.value=[1,2,3,4,5]}function x(d){const f=m.value.indexOf(d.id);f===-1?m.value.push(d.id):m.value.splice(f,1)}function E(){var d,f;console.log(m.value,S.roleId),(f=(d=window.$message)==null?void 0:d.success)==null||f.call(d,a("common.modifySuccess")),w()}function C(){N(),i()}return C(),(d,f)=>{const p=ue,k=P,U=H,u=te;return b(),R(u,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=n=>r.value=n),title:c.value,preset:"card",class:"w-480px"},{footer:o(()=>[l(U,{class:"w-full justify-end"},{default:o(()=>[l(k,{size:"small",class:"mt-16px",onClick:w},{default:o(()=>[B(D(e(a)("common.cancel")),1)]),_:1}),l(k,{type:"primary",size:"small",class:"mt-16px",onClick:E},{default:o(()=>[B(D(e(a)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[l(p,{"checked-keys":m.value,"onUpdate:checkedKeys":f[0]||(f[0]=n=>m.value=n),data:V.value,"node-key":"id","show-checkbox":"",class:"h-280px","default-checked-keys":m.value,onCheckChange:x},null,8,["checked-keys","data","default-checked-keys"])]),_:1},8,["modelValue","title"])}}}),We=K({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:$({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:$(["submitted"],["update:visible"]),setup(g,{emit:S}){const r=g,w=S,c=L(g,"visible"),{formRef:V,validate:N,restoreValidation:m}=Pe(),{defaultRequiredRule:i}=je(),{bool:x,setTrue:E}=ee(),{bool:C,setTrue:d}=ee(),f=O(()=>({add:a("page.manage.role.addRole"),edit:a("page.manage.role.editRole")})[r.operateType]),p=de(k());function k(){return{roleName:"",roleCode:"",roleDesc:"",status:void 0}}const U={roleName:i,roleCode:i,status:i},u=O(()=>{var s;return((s=r.rowData)==null?void 0:s.id)||-1}),n=O(()=>r.operateType==="edit");function I(){p.value=k(),r.operateType==="edit"&&r.rowData&&Object.assign(p.value,r.rowData)}function A(){c.value=!1}async function _(){var s;await N(),(s=window.$message)==null||s.success(a("common.updateSuccess")),A(),w("submitted")}return ae(c,()=>{c.value&&(I(),m())}),(s,t)=>{const T=me,v=ie,j=Ve,J=we,Z=ce,h=P,X=H,fe=xe;return b(),R(fe,{modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=y=>c.value=y),title:f.value,size:360},{footer:o(()=>[l(X,{size:16},{default:o(()=>[l(h,{onClick:A},{default:o(()=>[B(D(e(a)("common.cancel")),1)]),_:1}),l(h,{type:"primary",onClick:_},{default:o(()=>[B(D(e(a)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[l(Z,{ref_key:"formRef",ref:V,model:p.value,rules:U,"label-position":"top"},{default:o(()=>[l(v,{label:e(a)("page.manage.role.roleName"),prop:"roleName"},{default:o(()=>[l(T,{modelValue:p.value.roleName,"onUpdate:modelValue":t[0]||(t[0]=y=>p.value.roleName=y),placeholder:e(a)("page.manage.role.form.roleName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(v,{label:e(a)("page.manage.role.roleCode"),prop:"roleCode"},{default:o(()=>[l(T,{modelValue:p.value.roleCode,"onUpdate:modelValue":t[1]||(t[1]=y=>p.value.roleCode=y),placeholder:e(a)("page.manage.role.form.roleCode")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(v,{label:e(a)("page.manage.role.roleStatus"),prop:"status"},{default:o(()=>[l(J,{modelValue:p.value.status,"onUpdate:modelValue":t[2]||(t[2]=y=>p.value.status=y)},{default:o(()=>[(b(!0),G(W,null,q(e(oe),({label:y,value:Y})=>(b(),R(j,{key:Y,value:Y,label:e(a)(y)},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(v,{label:e(a)("page.manage.role.roleDesc"),prop:"roleDesc"},{default:o(()=>[l(T,{modelValue:p.value.roleDesc,"onUpdate:modelValue":t[3]||(t[3]=y=>p.value.roleDesc=y),placeholder:e(a)("page.manage.role.form.roleDesc")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),n.value?(b(),R(X,{key:0},{default:o(()=>[l(h,{onClick:e(E)},{default:o(()=>[B(D(e(a)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),l(Ke,{visible:e(x),"onUpdate:visible":t[4]||(t[4]=y=>F(x)?x.value=y:null),"role-id":u.value},null,8,["visible","role-id"]),l(h,{onClick:e(d)},{default:o(()=>[B(D(e(a)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),l(Le,{visible:e(C),"onUpdate:visible":t[5]||(t[5]=y=>F(C)?C.value=y:null),"role-id":u.value},null,8,["visible","role-id"])]),_:1})):re("",!0)]),_:1},8,["modelValue","title"])}}}),qe=K({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:$(["reset","search"],["update:model"]),setup(g,{emit:S}){const r=de(["role-search"]),w=S,c=L(g,"model");function V(){w("reset")}function N(){w("search")}return(m,i)=>{const x=me,E=ie,C=Ne,d=se,f=ne,p=Fe,k=P,U=$e,u=H,n=Re,I=ce,A=De,_=Se,s=pe;return b(),R(s,{class:"card-wrapper"},{default:o(()=>[l(_,{modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=t=>r.value=t)},{default:o(()=>[l(A,{title:e(a)("common.search"),name:"role-search"},{default:o(()=>[l(I,{model:c.value,"label-position":"right","label-width":80},{default:o(()=>[l(n,{gutter:24},{default:o(()=>[l(C,{lg:6,md:8,sm:12},{default:o(()=>[l(E,{label:e(a)("page.manage.role.roleName"),prop:"roleName"},{default:o(()=>[l(x,{modelValue:c.value.roleName,"onUpdate:modelValue":i[0]||(i[0]=t=>c.value.roleName=t),placeholder:e(a)("page.manage.role.form.roleName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(C,{lg:6,md:8,sm:12},{default:o(()=>[l(E,{label:e(a)("page.manage.role.roleCode"),prop:"roleCode"},{default:o(()=>[l(x,{modelValue:c.value.roleCode,"onUpdate:modelValue":i[1]||(i[1]=t=>c.value.roleCode=t),placeholder:e(a)("page.manage.role.form.roleCode")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(C,{lg:6,md:8,sm:12},{default:o(()=>[l(E,{label:e(a)("page.manage.role.roleStatus"),prop:"status"},{default:o(()=>[l(f,{modelValue:c.value.status,"onUpdate:modelValue":i[2]||(i[2]=t=>c.value.status=t),placeholder:e(a)("page.manage.role.form.roleStatus"),clearable:""},{default:o(()=>[(b(!0),G(W,null,q(e(ge)(e(oe)),({label:t,value:T})=>(b(),R(d,{key:T,label:t,value:T},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(C,{lg:6,md:24,sm:24},{default:o(()=>[l(u,{class:"w-full justify-end",alignment:"end"},{default:o(()=>[l(k,{onClick:V},{icon:o(()=>[l(p,{class:"text-icon"})]),default:o(()=>[B(" "+D(e(a)("common.reset")),1)]),_:1}),l(k,{type:"primary",plain:"",onClick:N},{icon:o(()=>[l(U,{class:"text-icon"})]),default:o(()=>[B(" "+D(e(a)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1})}}}),He={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},Je={class:"flex items-center justify-between"},Ze={class:"h-[calc(100%-50px)]"},Qe={class:"mt-20px flex justify-end"};function Q(g){return typeof g=="function"||Object.prototype.toString.call(g)==="[object Object]"&&!Oe(g)}const Xe=K({name:"manage_role",__name:"index",setup(g){const{columns:S,columnChecks:r,data:w,loading:c,getData:V,getDataByPage:N,mobilePagination:m,searchParams:i,resetSearchParams:x}=Ce({apiFn:Ee,apiParams:{current:1,size:10,status:void 0,roleName:void 0,roleCode:void 0},columns:()=>[{type:"selection",width:48},{prop:"index",label:a("common.index"),width:64},{prop:"roleName",label:a("page.manage.role.roleName"),minWidth:120},{prop:"roleCode",label:a("page.manage.role.roleCode"),minWidth:120},{prop:"roleDesc",label:a("page.manage.role.roleDesc"),minWidth:120},{prop:"status",label:a("page.manage.role.roleStatus"),width:100,formatter:_=>{if(_.status===void 0)return"";const s={1:"success",2:"warning"},t=a(be[_.status]);return l(Me,{type:s[_.status]},Q(t)?t:{default:()=>[t]})}},{prop:"operate",label:a("common.operate"),width:130,formatter:_=>{let s;return l("div",{class:"flex-center"},[l(P,{type:"primary",plain:!0,size:"small",onClick:()=>A(_.id)},Q(s=a("common.edit"))?s:{default:()=>[s]}),l(ze,{title:a("common.confirmDelete"),onConfirm:()=>I(_.id)},{reference:()=>{let t;return l(P,{type:"danger",plain:!0,size:"small"},Q(t=a("common.delete"))?t:{default:()=>[t]})}})])}}]}),{drawerVisible:E,operateType:C,editingData:d,handleAdd:f,handleEdit:p,checkedRowKeys:k,onBatchDeleted:U,onDeleted:u}=ke(w,V);async function n(){console.log(k.value),U()}function I(_){console.log(_),u()}function A(_){p(_)}return(_,s)=>{const t=_e,T=Ue,v=Be,j=Ie,J=pe,Z=Ae;return b(),G("div",He,[l(qe,{model:e(i),"onUpdate:model":s[0]||(s[0]=h=>F(i)?i.value=h:null),onReset:e(x),onSearch:e(N)},null,8,["model","onReset","onSearch"]),l(J,{class:"sm:flex-1-hidden card-wrapper","body-class":"ht50"},{header:o(()=>[z("div",Je,[z("p",null,D(e(a)("page.manage.role.title")),1),l(t,{columns:e(r),"onUpdate:columns":s[1]||(s[1]=h=>F(r)?r.value=h:null),"disabled-delete":e(k).length===0,loading:e(c),onAdd:e(f),onDelete:n,onRefresh:e(V)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])])]),default:o(()=>[z("div",Ze,[Te((b(),R(v,{height:"100%",border:"",class:"sm:h-full",data:e(w),"row-key":"id",onSelectionChange:s[2]||(s[2]=h=>k.value=h)},{default:o(()=>[(b(!0),G(W,null,q(e(S),h=>(b(),R(T,le({key:h.prop,ref_for:!0},h),null,16))),128))]),_:1},8,["data"])),[[Z,e(c)]]),z("div",Qe,[e(m).total?(b(),R(j,le({key:0,layout:"total,prev,pager,next,sizes"},e(m),{onCurrentChange:e(m)["current-change"],onSizeChange:e(m)["size-change"]}),null,16,["onCurrentChange","onSizeChange"])):re("",!0)])]),l(We,{visible:e(E),"onUpdate:visible":s[3]||(s[3]=h=>F(E)?E.value=h:null),"operate-type":e(C),"row-data":e(d),onSubmitted:e(N)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1})])}}}),ul=ve(Xe,[["__scopeId","data-v-251db562"]]);export{ul as default};
