import{d as y,a as D,Z as L,r as s,aH as O,i as P,b as U,o as x,f,w as _,a3 as $,h as V,aT as z,a2 as F,aj as C,c as k,aR as I,J as R,e as j,t as G,aS as H}from"./index-NHnUW4Mz.js";import{f as J}from"./product-D0ytkss5.js";const M={class:"select_tree_box"},Z=y({__name:"select-tree",props:{selectValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"请选择"},showRoot:{type:Boolean,default:!1},isExcludeSupplier:{type:Boolean,default:!1}},emits:["update:selectValue"],setup(b,{emit:c}){const u={value:"value",label:"label",children:"children"},r=b,p=c,t=D({get(){return console.log("父传子props.selectValue",r.selectValue),r.selectValue||[]},set(e){console.log("发给父组件的newValue",e),p("update:selectValue",e)}});L(()=>r.selectValue,e=>{t.value=e,console.log("接收父组件的newValue",e)},{immediate:!0});const d=s([]),X=s([]),v=s([]),n=O({currentNodeKey:"",currentNodeLabel:""}),g=s(null),o=s(null);P(()=>{J({search:"",pageNo:1,pageSize:3e3}).then(e=>{var a;console.log("XXXXXXXXXXXXXX res",e),e.data&&(d.value=e.data.products.map(l=>({value:l.product_id,label:l.product_name,level:1,children:[{value:`${l.product_id}_001`,label:`${l.product_name}_001children`,level:2}]})),console.log("XXXXXXXXXXXXX listData.value",d.value),(a=o.value)==null||a.setExpandedKeys(["1"]))})});const E=e=>{var a;console.log("XXXXXXXXXXXXX visible",e),e&&((a=o.value)==null||a.setExpandedKeys([]))},N=()=>{var e;t.value=[],(e=o.value)==null||e.setCheckedKeys([])},S=e=>{var a,l;console.log("11111111111111 query",e),v.value=[],(a=o.value)==null||a.filter(e),console.log("2222222222222",(l=o.value)==null?void 0:l.filter(e),o.value)},T=(e,a)=>{console.log("11111XXXXXXXXXXXX data,info:",e,e.children,a),t.value=a.checkedNodes.filter(l=>l.level===2).map(l=>(console.log("item",l,l.value),{label:l.label,value:l.value})),console.log("xxxxxxxxxxxxxxx  dataValue.value",t.value)},B=e=>{console.log("XXXXXXXXXXXX data,node:",e)},w=e=>{var a,l;if(Array.isArray(e))for(let i=0;i<e.length;i+=1){const m=(a=v.value)==null?void 0:a.find(h=>h.value===e[i]);m&&X.value.findIndex(A=>A.value===m.value)>=0&&X.value.push(m)}(l=g.value)==null||l.blur()},K=(e,a)=>{if(e){const l=a.label.includes(e);return console.log("3333333333",l),l}return!0};return(e,a)=>{const l=$;return x(),U("div",M,[f(V(F),{ref_key:"treeSelect",ref:g,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=i=>t.value=i),"value-key":"value",clearable:"",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择","filter-method":S,onClear:N,onChange:w,onVisibleChange:E},{default:_(()=>[f(l,{value:n.currentNodeKey,label:n.currentNodeLabel},{default:_(()=>[f(V(z),{id:"tree_v2",ref_key:"treeV2",ref:o,data:d.value,props:u,"show-checkbox":"","filter-method":K,"default-expand-all":!1,"expanded-keys":[],"auto-expand-parent":!1,onNodeClick:B,onCheck:T},null,8,["data"])]),_:1},8,["value","label"])]),_:1},8,["modelValue"])])}}}),Q=C(Z,[["__scopeId","data-v-d0b46fbb"]]),W=y({name:"personal-content_el-select-tree-optimization",__name:"index",setup(b){const c=s("first"),u=s([]),r=(p,t)=>{console.log(p,t)};return(p,t)=>{const d=Q,X=I,v=H;return x(),k(v,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=n=>c.value=n),class:"demo-tabs",onTabClick:r},{default:_(()=>[f(X,{label:"虚拟SelectTree优化",name:"first"},{default:_(()=>[c.value==="first"?(x(),k(d,{key:0,"select-value":u.value,"onUpdate:selectValue":t[0]||(t[0]=n=>u.value=n)},null,8,["select-value"])):R("",!0),j("div",null,"当前选中的值："+G(u.value),1)]),_:1})]),_:1},8,["modelValue"])}}}),ee=C(W,[["__scopeId","data-v-483b8127"]]);export{ee as default};
