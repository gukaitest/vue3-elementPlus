import{d as N,r as l,D as z,aH as C,a as V,aV as F,i as P,a$ as y,al as H,b0 as R,c as T,o as L,w as i,f as r,a7 as k,a8 as I,e as f,b1 as A,h as B,N as D,b2 as U,b3 as O,aj as W}from"./index-B2IENDhD.js";import{f as $}from"./product-CDKUV4Pt.js";const j={class:"flex-col-top size-full min-h-420px gap-24px overflow-hidden"},q=N({name:"personal-content_select-optimization",__name:"index",setup(G){const d=l(""),t=l(null),h=z(),o=C({pageNo:1,pageSize:50,total:51}),_=V(()=>h.isMobile?0:16),b={enableConsoleLog:!0,enableReport:!0,reportUrl:"http://localhost:3000/monitor/webvitals",thresholds:{fps:30},fpsConfig:{duration:2e3,sampleInterval:100,enabled:!0}},u=e=>{const a=e.detail;a.name==="FPS"&&console.log("ğŸ¯ Select Optimization FPSç›‘æ§ç»“æœ:",{average:`${a.value}fps`,rating:a.rating,action:"ä¸‹æ‹‰æ¡†APIè¯·æ±‚&é‡æ–°æ¸²æŸ“"})},g=l([]),s=l([]),S=l(!1),m=async()=>{try{console.log("ğŸš€ å¼€å§‹ç›‘æ§ä¸‹æ‹‰æ¡†APIè¯·æ±‚å’Œæ¸²æŸ“FPS..."),U(b),await $({search:d.value,pageNo:o.pageNo,pageSize:o.pageSize}).then(e=>{var n,c;console.log("res",e);const a=((n=e==null?void 0:e.data)==null?void 0:n.products.map(p=>({value:p.product_id,label:p.product_name})))??[];o.total=((c=e==null?void 0:e.data)==null?void 0:c.total)??0,s.value.push(...a)})}finally{}},w=()=>{if(t.value){console.log("loadMoreåˆ¤æ–­ä¾æ®,scrollHeight,scrollTop,clientHeight,é˜ˆå€¼,total,pageNo,pageSize",t.value.scrollHeight,t.value.scrollTop,t.value.clientHeight,0,o.total,o.pageNo,o.pageSize);const e=t.value.scrollHeight<=t.value.clientHeight+t.value.scrollTop+0&&o.total>o.pageNo*o.pageSize;console.log("åŠ è½½æ›´å¤š loadMore:",e),e&&(o.pageNo+=1,m())}},v=()=>{t.value=document.querySelector(".selectRef .el-select-dropdown__list"),t.value&&t.value.addEventListener("scroll",w)},x=F(async e=>{console.log("query",e),d.value=e,o.pageNo=1,o.pageSize=50,s.value.splice(0,s.value.length),await m(),setTimeout(()=>{v()},2e3)},500);return P(()=>{window.addEventListener("web-vitals",u),y({longTaskConfig:{enabled:!0,threshold:50,maxTasks:100,includeAttribution:!0}})}),H(()=>{window.removeEventListener("web-vitals",u),O(),R()}),(e,a)=>{const n=A,c=I,p=k,E=D;return L(),T(E,{class:"card-wrapper"},{default:i(()=>[r(p,{gutter:_.value,class:"px-8px"},{default:i(()=>[r(c,{md:18,sm:24},{default:i(()=>[f("div",j,[a[1]||(a[1]=f("span",null,"äº§å“:",-1)),r(n,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=M=>g.value=M),"popper-class":"selectRef",class:"m-6","popper-append-to-body":!1,multiple:"",filterable:"",remote:"","collapse-tags":"","max-collapse-tags":3,"remote-method":B(x),clearable:"",options:s.value,loading:S.value,placeholder:"è¯·è¾“å…¥å…³é”®å­—å†é€‰æ‹©",style:{width:"240px"},onFocus:v},null,8,["modelValue","remote-method","options","loading"])])]),_:1})]),_:1},8,["gutter"])]),_:1})}}}),X=W(q,[["__scopeId","data-v-5ed8f2c8"]]);export{X as default};
