import{b6 as T,G as L,a as x,r as j,b7 as B,Z as w,l as E,au as M}from"./index-q4uhLKit.js";import{i as R,u as q,a as G,b as Z,c as A,d as D,e as H,f as I,g as J,h as K,j as N,k as P,l as Q,m as V,n as W,o as X,p as Y,q as _,r as F}from"./installCanvasRenderer-DRoOyF6r.js";q([G,Z,A,D,H,I,J,K,N,P,Q,V,W,X,Y,_,F]);function ta(d,m={}){const h=T(),p=L(),l=x(()=>p.darkMode),i=j(null),e={width:0,height:0},{width:$,height:b}=B(i,e);let a=null;const o=d(),{onRender:u=t=>{const s=l.value?"rgb(224, 224, 224)":"rgb(31, 31, 31)",C=l.value?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.8)";t.showLoading({color:p.themeColor,textColor:s,fontSize:14,maskColor:C})},onUpdated:n=t=>{t.hideLoading()},onDestroy:c}=m;function k(){return i.value&&e.width>0&&e.height>0}function r(){return!!(i.value&&a)}async function O(t=()=>o){if(!r())return;const s=t(o,d);Object.assign(o,s),r()&&(a==null||a.clear()),a==null||a.setOption({...s,backgroundColor:"transparent"}),await(n==null?void 0:n(a))}function S(t){a==null||a.setOption(t)}async function g(){if(!r()){const t=l.value?"dark":"light";await M(),a=R(i.value,t),a.setOption({...o,backgroundColor:"transparent"}),await(u==null?void 0:u(a))}}function v(){a==null||a.resize()}async function f(){a&&(await(c==null?void 0:c(a)),a==null||a.dispose(),a=null)}async function y(){await f(),await g(),await(n==null?void 0:n(a))}async function z(t,s){if(e.width=t,e.height=s,!k()){await f();return}r()&&v(),await g()}return h.run(()=>{w([$,b],([t,s])=>{z(t,s)}),w(l,()=>{y()})}),E(()=>{f(),h.stop()}),{domRef:i,updateOptions:O,setOptions:S}}export{ta as u};
