import{c as M,w as y,x as C,y as N,z as P,j as V}from"./index-BBz38mVY.js";import{f as F}from"./product-BU34Onz0.js";import{r as R,R as l,a9 as H,s as T,ay as L,aH as k,ci as I,K as A,v as B,P as i,J as r,bv as D,bw as j,y as f,cj as O,D as U,g as W}from"./vue-vendor-DLKW-W3j.js";const q={class:"flex-col-top size-full min-h-420px gap-24px overflow-hidden"},G=R({name:"personal-content_select-optimization",__name:"index",setup(J){const d=l(""),t=l(null),_=M(),o=H({pageNo:1,pageSize:50,total:51}),h=T(()=>_.isMobile?0:16),S={enableConsoleLog:!0,enableReport:!0,thresholds:{fps:30},fpsConfig:{duration:2e3,sampleInterval:100,enabled:!0}},u=e=>{const a=e.detail;a.name==="FPS"&&console.log("ğŸ¯ Select Optimization FPSç›‘æ§ç»“æœ:",{average:`${a.value}fps`,rating:a.rating,action:"ä¸‹æ‹‰æ¡†APIè¯·æ±‚&é‡æ–°æ¸²æŸ“"})},g=l([]),s=l([]),b=l(!1),m=async()=>{try{console.log("ğŸš€ å¼€å§‹ç›‘æ§ä¸‹æ‹‰æ¡†APIè¯·æ±‚å’Œæ¸²æŸ“FPS..."),N(S),await F({product_name:d.value,pageNo:o.pageNo,pageSize:o.pageSize}).then(e=>{var n,c;console.log("res",e);const a=((n=e==null?void 0:e.data)==null?void 0:n.products.map(p=>({value:p.product_id,label:p.product_name})))??[];o.total=((c=e==null?void 0:e.data)==null?void 0:c.total)??0,s.value.push(...a)})}finally{}},w=()=>{if(t.value){console.log("loadMoreåˆ¤æ–­ä¾æ®,scrollHeight,scrollTop,clientHeight,é˜ˆå€¼,total,pageNo,pageSize",t.value.scrollHeight,t.value.scrollTop,t.value.clientHeight,0,o.total,o.pageNo,o.pageSize);const e=t.value.scrollHeight<=t.value.clientHeight+t.value.scrollTop+0&&o.total>o.pageNo*o.pageSize;console.log("åŠ è½½æ›´å¤š loadMore:",e),e&&(o.pageNo+=1,m())}},v=()=>{t.value=document.querySelector(".selectRef .el-select-dropdown__list"),t.value&&t.value.addEventListener("scroll",w)},x=L(async e=>{console.log("query",e),d.value=e,o.pageNo=1,o.pageSize=50,s.value.splice(0,s.value.length),await m(),setTimeout(()=>{v()},2e3)},500);return k(()=>{window.addEventListener("web-vitals",u),y({longTaskConfig:{enabled:!0,threshold:50,maxTasks:100,includeAttribution:!0}})}),I(()=>{window.removeEventListener("web-vitals",u),P(),C()}),(e,a)=>{const n=O,c=j,p=D,E=W;return B(),A(E,{class:"card-wrapper"},{default:i(()=>[r(p,{gutter:h.value,class:"px-8px"},{default:i(()=>[r(c,{md:18,sm:24},{default:i(()=>[f("div",q,[a[1]||(a[1]=f("span",null,"äº§å“:",-1)),r(n,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=z=>g.value=z),"popper-class":"selectRef",class:"m-6","popper-append-to-body":!1,multiple:"",filterable:"",remote:"","collapse-tags":"","max-collapse-tags":3,"remote-method":U(x),clearable:"",options:s.value,loading:b.value,placeholder:"è¯·è¾“å…¥å…³é”®å­—å†é€‰æ‹©",style:{width:"240px"},onFocus:v},null,8,["modelValue","remote-method","options","loading"])])]),_:1})]),_:1},8,["gutter"])]),_:1})}}}),Y=V(G,[["__scopeId","data-v-8a0853a8"]]);export{Y as default};
